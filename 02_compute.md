OpenStack コンピュート
======================

Nova Service の役割
-------------------

### Nova の各プロセスの意味

Nova は以下のようなプロセス群を持っている。

* nova-api

    Nova の REST API を提供する。

* nova-scheduler

    仮想マシンインスタンスの配置先を決定する。

* nova-compute

    仮想化ハイパーバイザを制御する。

* nova-conductor
    
    Nova に関連するプロセスの DB アクセスを仲介する。

* nova-consoleauth

    コンソールアクセス時の認証を管理する。

* nova-novncproxy

    Web ブラウザ経由で仮想マシンインスタンスのコンソールアクセスを提供する。

* nova-xvpvncproxy

    Java クライアント経由で仮想マシンインスタンスのコンソールアクセスを提供する。

* nova-cert

    EC2 股間 API を利用する際に必要となる証明書を管理する。

### Nova のを使って行うインスタンスの管理

* Nova はイメージを使用してインスタンスを起動する。

* Nova 自体には仮想化の機能はないが、仮想化テクノロジーとインターフェイスを取るドライバーを通じて、ハイパーバイザを統合する。

* インスタンスを起動するにはフレーバーを指定する。

* フレーバーには、CPU, RAM, ハードディスクのリソースを記述する。フレーバーは管理者が構成可能。

* フレーバーが指定されると、インスタンス実行をすけージューリングするために、特定のコンピュートノード(Openstackではホストと呼ぶ)に割り当てる。

### nova-scheduler の目的
 
* Nova のシステムのそれぞれが定期的にステータスと機能を nova-scheduler に報告する。nova-scheduler はそのデータを使用して、ホストに対するインスタンスの割当を最適化する。

* 割当は以下の2つのフェーズで構成される。

    1. フィルタリング

        仮想マシンに割当済の CPU コア数やメモリの割合などの複数のフィルターを利用して候補となるホストを決定する。

    2. 重みつけ

        ホストの空きメモリ容量等のパラメータを利用して、フィルタリングされたホストをソートする。最小コストを満たすことのできるホストに割当が決定する。

Nova の操作
-------------

### 仮想インスタンスおよびベアメタルインスタンスの使い方と違い

* ベアメタルインスタンス

    物理マシンに直接作成されたインスタンスで、仮想化レイヤー基盤を持っていない。Nova は IPMI 経由で電源を制御する。
    
### リブート, リビルド, リサイズなどの管理操作


### フレーバーの使用方法

### イメージまたはボリュームの使用方法と意味

* ボリューム

    OpenStack のボリュームは、インスタンスから接続及び切断できる、永続的なブロックストレージデバイス。一度に接続できるのは1インスタンスのみで、外部ハードディスクに似ている。インスタンス内のオペレーティングシステム内でマウントする。

Nova で利用できるネットワーク
-----------------------------

### 3種類の Nova ネットワーク

### Nova-network の制限

